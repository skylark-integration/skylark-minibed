{"version":3,"sources":["utils.js"],"names":["define","CreateDOM","tagName","parts","split","shift","this","el","document","createElement","forEach","c","addClass","class","name","setAttr","attr","val","setAttribute","html","innerHTML","dom","append","appendChild","deepExtend","out","i","arguments","length","obj","key","hasOwnProperty","Array","isArray","css","cssPrefixes","cssProps","getStyleProp","replace","match","letter","toUpperCase","style","body","vendorName","capName","charAt","slice","getVendorProp","applyCss","element","prop","value","properties","args","undefined","addListener","events","cb","useCapture","addEventListener","attachEvent","hasClass","classList","indexOf","oldList","newList","className","substring","animationEndEvents","inArray","needle","haystack","argStrict","stopPropagation","evt","window","event","cancelBubble","generateID","prefix","id","r","Math","random","toString","outerHeight","height","offsetHeight","getComputedStyle","parseInt","marginTop","marginBottom","removeClass","remove","parentNode","removeChild","getExtension","fileName","fixHTML","div","Request","url","callback","failCallback","xmlHttp","XMLHttpRequest","onreadystatechange","readyState","status","responseText","setTimeout","open","send","xdr","XDomainRequest","onerror","ontimeout","onload","isTouchDevice","navigator","maxTouchPoints","MBResizable","self","handle","initResizeable","e","preventDefault","touches","err","startX","clientX","startY","clientY","startWidth","defaultView","width","startHeight","onDrag","stopDrag","onTouchMove","onTouchEnd","changedTouches","removeEventListener"],"mappings":"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","file":"../utils.js","sourcesContent":["define([],function(){\n\n  /* GLOBAL XMLHttpRequest, XDomainRequest */\n  const animationEndEvents = 'webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend'\n\n  function CreateDOM (tagName) {\n    let parts = tagName.split('.')\n    tagName = parts.shift()\n\n    this.el = document.createElement(tagName)\n\n    parts.forEach(c => {\n      addClass(this.el, c)\n    })\n\n    this.class = name => {\n      addClass(this.el, name)\n      return this\n    }\n\n    this.setAttr = (attr, val) => {\n      this.el.setAttribute(attr, val)\n      return this\n    }\n\n    this.html = val => {\n      this.el.innerHTML = val\n      return this\n    }\n\n    this.dom = () => {\n      return this.el\n    }\n\n    this.append = el => {\n      this.el.appendChild(el)\n      return this\n    }\n\n    return this\n  }\n\n  function inArray (needle, haystack, argStrict) {\n    let key\n    let strict = !!argStrict\n\n    if (strict) {\n      for (key in haystack) {\n        if (haystack.hasOwnProperty(key) && haystack[key] === needle) {\n          return true\n        }\n      }\n    } else {\n      for (key in haystack) {\n        if (haystack.hasOwnProperty(key) && haystack[key] === needle) {\n          return true\n        }\n      }\n    }\n    return false\n  }\n\n  function stopPropagation (evt) {\n    evt = evt || window.event\n\n    if (typeof evt.stopPropagation !== 'undefined') {\n      evt.stopPropagation()\n    } else {\n      evt.cancelBubble = true\n    }\n  }\n\n  const deepExtend = function (out) {\n    out = out || {}\n\n    for (let i = 1; i < arguments.length; i++) {\n      let obj = arguments[i]\n\n      if (!obj) continue\n\n      for (let key in obj) {\n        if (obj.hasOwnProperty(key)) {\n          if (Array.isArray(obj[key])) {\n            out[key] = obj[key]\n          } else if (typeof obj[key] === 'object' && obj[key] !== null) {\n            out[key] = deepExtend(out[key], obj[key])\n          } else {\n            out[key] = obj[key]\n          }\n        }\n      }\n    }\n\n    return out\n  }\n\n  function generateID (prefix = '') {\n    let id = `minibed_${prefix}_`\n\n    id += 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n      let r = Math.random() * 16 | 0\n      let v = c === 'x' ? r : r & 0x3 | 0x8\n      return v.toString(16)\n    })\n\n    return id\n  }\n\n  function outerHeight (el) {\n    let height = el.offsetHeight\n    let style = window.getComputedStyle(el)\n\n    height += parseInt(style.marginTop) + parseInt(style.marginBottom)\n    return height\n  }\n\n  let css = (function () {\n    let cssPrefixes = ['Webkit', 'O', 'Moz', 'ms']\n    let cssProps = {}\n\n    function camelCase (string) {\n      return string\n        .replace(/^-ms-/, 'ms-')\n        .replace(/-([\\da-z])/gi, function (match, letter) {\n          return letter.toUpperCase()\n        })\n    }\n\n    function getVendorProp (name) {\n      let style = document.body.style\n      if (name in style) return name\n\n      let i = cssPrefixes.length\n      let capName = name.charAt(0).toUpperCase() + name.slice(1)\n      let vendorName\n\n      while (i--) {\n        vendorName = cssPrefixes[i] + capName\n        if (vendorName in style) return vendorName\n      }\n\n      return name\n    }\n\n    function getStyleProp (name) {\n      name = camelCase(name)\n      return cssProps[name] || (cssProps[name] = getVendorProp(name))\n    }\n\n    function applyCss (element, prop, value) {\n      prop = getStyleProp(prop)\n      element.style[prop] = value\n    }\n\n    return function (element, properties) {\n      let args = arguments\n      let prop\n      let value\n\n      if (args.length === 2) {\n        for (prop in properties) {\n          if (properties.hasOwnProperty(prop)) {\n            value = properties[prop]\n            if (value !== undefined && properties.hasOwnProperty(prop)) {\n              applyCss(element, prop, value)\n            }\n          }\n        }\n      } else {\n        applyCss(element, args[1], args[2])\n      }\n    }\n  })()\n\n  function addListener (el, events, cb, useCapture = false) {\n    events = events.split(' ')\n    for (let i = 0; i < events.length; i++) {\n      if (document.addEventListener) {\n        el.addEventListener(events[i], cb, useCapture)\n      } else if (document.attachEvent) {\n        el.attachEvent('on' + events[i], cb)\n      }\n    }\n  }\n\n  function hasClass (element, name) {\n    let list = typeof element === 'string' ? element : classList(element)\n    return list.indexOf(' ' + name + ' ') >= 0\n  }\n\n  function addClass (element, name) {\n    let oldList = classList(element)\n    let newList = oldList + name\n\n    if (hasClass(oldList, name)) return\n\n    // Trim the opening space.\n    element.className = newList.substring(1)\n  }\n\n  function removeClass (element, name) {\n    let oldList = classList(element)\n    let newList\n\n    if (!hasClass(element, name)) return\n\n    // Replace the class name.\n    newList = oldList.replace(' ' + name + ' ', ' ')\n\n    // Trim the opening and closing spaces.\n    element.className = newList.substring(1, newList.length - 1)\n  }\n\n  function remove (element) {\n    if (element.parentNode) {\n      element.parentNode.removeChild(element)\n    }\n  }\n\n  function classList (element) {\n    return (' ' + ((element && element.className) || '') + ' ').replace(\n      /\\s+/gi,\n      ' '\n    )\n  }\n\n  function getExtension (fileName) {\n    return fileName.match(/\\.([^.]+)$/)[1]\n  }\n\n  function fixHTML (html) {\n    const div = document.createElement('div')\n    div.innerHTML = html\n    return div.innerHTML\n  }\n\n  const Request = (url, callback, failCallback) => {\n    const xmlHttp = new window.XMLHttpRequest()\n\n    // @see http://blogs.msdn.com/b/ie/archive/2012/02/09/cors-for-xhr-in-ie10.aspx\n    // @see http://bionicspirit.com/blog/2011/03/24/cross-domain-requests.html\n    // @see http://msdn.microsoft.com/en-us/library/ie/cc288060(v=vs.85).aspx\n    if ('withCredentials' in xmlHttp) {\n      // for Chrome, Firefox, Opera\n      xmlHttp.onreadystatechange = () => {\n        if (xmlHttp.readyState === 4) {\n          if (xmlHttp.status === 200 || xmlHttp.status === 304) {\n            callback(xmlHttp.responseText)\n          } else {\n            setTimeout(failCallback, 0)\n          }\n        }\n      }\n\n      xmlHttp.open('GET', url, true)\n      xmlHttp.send()\n    } else {\n      // for IE\n      const xdr = new window.XDomainRequest()\n      xdr.onerror = () => {\n        setTimeout(failCallback, 0)\n      }\n      xdr.ontimeout = () => {\n        setTimeout(failCallback, 0)\n      }\n      xdr.onload = () => {\n        callback(xdr.responseText)\n      }\n\n      xdr.open('get', url)\n      xdr.send()\n    }\n  }\n\n  function isTouchDevice () {\n    return 'ontouchstart' in window || navigator.maxTouchPoints\n  }\n\n  function MBResizable (el, cb = () => {}) {\n    const self = this\n    this.el = el\n\n    const handle = new CreateDOM('div.resizable-handle').el\n    el.appendChild(handle)\n\n    addListener(handle, 'mousedown', initResizeable, false)\n    addListener(handle, 'touchstart', initResizeable, false)\n\n    function initResizeable (e) {\n      e.preventDefault()\n\n      try {\n        e = e.touches[0] ? e.touches[0] : e\n      } catch (err) {}\n\n      self.startX = e.clientX\n      self.startY = e.clientY\n      self.startWidth = parseInt(\n        document.defaultView.getComputedStyle(self.el, null).width,\n        10\n      )\n      self.startHeight = parseInt(\n        document.defaultView.getComputedStyle(self.el, null).height,\n        10\n      )\n\n      addListener(window, 'mousemove', onDrag, false)\n      addListener(window, 'mouseup', stopDrag, false)\n\n      addListener(window, 'touchmove', onTouchMove, false)\n      addListener(window, 'touchend', onTouchEnd, false)\n    }\n\n    function onTouchMove (e) {\n      onDrag(e.touches[0])\n    }\n\n    function onTouchEnd (e) {\n      if (e.touches.length === 0) {\n        stopDrag(e.changedTouches[0])\n      }\n    }\n\n    function onDrag (e) {\n      self.el.style.height = self.startHeight + e.clientY - self.startY + 'px'\n      cb()\n    }\n\n    function stopDrag () {\n      window.removeEventListener('mousemove', onDrag, false)\n      window.removeEventListener('mouseup', stopDrag, false)\n      window.removeEventListener('touchmove', onTouchMove, false)\n      window.removeEventListener('touchend', onTouchEnd, false)\n    }\n  }\n\n  return {\n    animationEndEvents,\n    CreateDOM,\n    inArray,\n    stopPropagation,\n    deepExtend,\n    generateID,\n    outerHeight,\n    css,\n    addListener,\n    hasClass,\n    addClass,\n    removeClass,\n    remove,\n    classList,\n    getExtension,\n    fixHTML,\n    Request,\n    isTouchDevice,\n    MBResizable\n  }\n\n});"]}