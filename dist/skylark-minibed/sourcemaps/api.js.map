{"version":3,"sources":["api.js"],"names":["define","Utils","PreprocessorNames","sass","scss","less","stylus","babel","coffeescript","livescript","typescript","haml","slim","pug","getProcessorNameFor","ref","lang","name","options","settings","preprocessor","undefined","getShortName","parts","split","length","FileTypes","html","css","js","Includes","normalize","reset","Defaults","theme","editorTheme","id","container","files","external","readOnly","scrollLock","lineWrapping","lineNumbers","tabSize","base","prefixing","imports","build","document","querySelector","findOrCreateContainer","wrapper","createElement","setAttribute","addClass","notes","tabs","CreateDOM","foundActive","logo","setAttr","append","el","has","tabsHTML","class","current","dropdown","i","forEach","file","tab","tabsCSS","tabsJS","result","appendChild","buildHeader","tabContents","loading","tabContent","resultFrame","buildContents","footer","note","p","buildFooter"],"mappings":"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","file":"../api.js","sourcesContent":["define([\n  \"./utils\"\n],function(Utils){\n\n  const FileTypes = {\n    html: ['html'],\n    css: ['css', 'sass', 'scss', 'less'],\n    js: ['js', 'es6']\n  }\n\n  const Includes = {\n    normalize: 'https://cdnjs.cloudflare.com/ajax/libs/normalize/6.0.0/normalize.min.css',\n    reset: 'https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css'\n  }\n\n  let Defaults = {\n    theme: 'dark',\n    editorTheme: 'minibed-dark',\n    id: false,\n    container: false,\n    files: {\n      html: [],\n      js: [],\n      css: []\n    },\n    external: {\n      js: [],\n      css: []\n    },\n    settings: {\n      readOnly: false, // true, nocursor, false\n      scrollLock: false,\n      lineWrapping: true,\n      lineNumbers: true,\n      tabSize: 2,\n      js: {\n        preprocessor: 'none' // babel, typescript, coffeescript, livescript\n      },\n      css: {\n        preprocessor: 'none', // less, sass, scss, stylus, postcss\n        base: 'normalize', // reset, none\n        prefixing: 'none', // autoprefixer\n        imports: [] // susy, compass, bourbon etc. NOT IMPLEMENTED YET\n      },\n      html: {\n        preprocessor: 'none' // haml, markdown, slim, pug\n      }\n    }\n  }\n\n  const PreprocessorNames = {\n    sass: 'SASS',\n    scss: 'SCSS',\n    less: 'LESS',\n    stylus: 'Stylus',\n    babel: 'Babel',\n    coffeescript: 'CoffeeScript',\n    livescript: 'LiveScript',\n    typescript: 'TypeScript',\n    haml: 'Haml',\n    slim: 'Slim',\n    pug: 'Pug'\n  }\n  /**\n   * @param {Minibed} ref\n   * @return {void}\n   */\n  function build (ref) {\n    findOrCreateContainer(ref)\n\n    ref.wrapper = document.createElement('div')\n    ref.wrapper.setAttribute('id', ref.id)\n    Utils.addClass(\n      ref.wrapper,\n      `minibed_bed minibed_theme__${ref.options.theme}`\n    )\n\n    if (ref.options.notes.length > 0) {\n      Utils.addClass(ref.wrapper, 'minibed_has_footer')\n    }\n\n    buildHeader(ref)\n    buildContents(ref)\n    buildFooter(ref)\n  }\n\n  function getProcessorNameFor (ref, lang) {\n    let name = PreprocessorNames[ref.options.settings[lang].preprocessor]\n    if (name === undefined) {\n      if (lang === 'js') {\n        return 'JavaScript'\n      } else if (lang === 'css') {\n        return 'CSS'\n      } else {\n        return 'HTML'\n      }\n    }\n\n    return name\n  }\n\n  /**\n   * @param {Minibed} ref\n   * @return {void}\n   */\n  function buildHeader (ref) {\n    const tabs = new Utils.CreateDOM('div.minibed_tabs')\n    let foundActive = false\n\n    const logo = new Utils.CreateDOM('a.minibed_logo')\n      .setAttr('href', 'http://ned.im/minibed')\n      .html('minibed')\n    tabs.append(logo.el)\n\n    if (ref.has.html) {\n      const tabsHTML = new Utils.CreateDOM('div.minibed_tab.minibed_tabs_html')\n      tabsHTML.setAttr('data-lang', 'htmlmixed')\n      tabsHTML.setAttr('data-multiple', ref.options.files.html.length > 1)\n\n      if (!foundActive) {\n        tabsHTML.class('minibed_active')\n        foundActive = true\n      }\n\n      const current = new Utils.CreateDOM('div.minibed_tabs_current')\n        .setAttr('data-current', ref.options.files.html[0])\n        .html(getProcessorNameFor(ref, 'html'))\n      tabsHTML.append(current.el)\n\n      if (ref.options.files.html.length > 1) {\n        const dropdown = new Utils.CreateDOM('div.minibed_tabs_dropdown')\n\n        let i = 0\n        ref.options.files.html.forEach(file => {\n          const tab = new Utils.CreateDOM('div.minibed_dropdown_item')\n            .html(getShortName(file))\n            .setAttr('data-file', file)\n\n          if (i === 0) {\n            tab.class('minibed_selected_tab')\n          }\n\n          dropdown.append(tab.el)\n          i++\n        })\n        tabsHTML.append(dropdown.el)\n      }\n\n      tabs.append(tabsHTML.el)\n    }\n\n    if (ref.has.css) {\n      const tabsCSS = new Utils.CreateDOM('div.minibed_tab.minibed_tabs_css')\n      tabsCSS.setAttr('data-lang', 'css')\n      tabsCSS.setAttr('data-multiple', ref.options.files.css.length > 1)\n\n      if (!foundActive) {\n        tabsCSS.class('minibed_active')\n        foundActive = true\n      }\n\n      const current = new Utils.CreateDOM('div.minibed_tabs_current')\n        .setAttr('data-current', ref.options.files.css[0])\n        .html(getProcessorNameFor(ref, 'css'))\n      tabsCSS.append(current.el)\n\n      if (ref.options.files.css.length > 1) {\n        const dropdown = new Utils.CreateDOM('div.minibed_tabs_dropdown')\n\n        let i = 0\n        ref.options.files.css.forEach(file => {\n          const tab = new Utils.CreateDOM('div.minibed_dropdown_item')\n            .html(getShortName(file))\n            .setAttr('data-file', file)\n\n          if (i === 0) {\n            tab.class('minibed_selected_tab')\n          }\n\n          dropdown.append(tab.el)\n          i++\n        })\n        tabsCSS.append(dropdown.el)\n      }\n\n      tabs.append(tabsCSS.el)\n    }\n\n    if (ref.has.js) {\n      const tabsJS = new Utils.CreateDOM('div.minibed_tab.minibed_tabs_js')\n      tabsJS.setAttr('data-lang', 'javascript')\n      tabsJS.setAttr('data-multiple', ref.options.files.js.length > 1)\n\n      if (!foundActive) {\n        tabsJS.class('minibed_active')\n      }\n\n      const current = new Utils.CreateDOM('div.minibed_tabs_current')\n        .setAttr('data-current', ref.options.files.js[0])\n        .html(getProcessorNameFor(ref, 'js'))\n      tabsJS.append(current.el)\n\n      if (ref.options.files.js.length > 1) {\n        const dropdown = new Utils.CreateDOM('div.minibed_tabs_dropdown')\n\n        let i = 0\n        ref.options.files.js.forEach(file => {\n          const tab = new Utils.CreateDOM('div.minibed_dropdown_item')\n            .html(getShortName(file))\n            .setAttr('data-file', file)\n\n          if (i === 0) {\n            tab.class('minibed_selected_tab')\n          }\n\n          dropdown.append(tab.el)\n          i++\n        })\n        tabsJS.append(dropdown.el)\n      }\n\n      tabs.append(tabsJS.el)\n    }\n\n    const result = new Utils.CreateDOM('div.minibed_tab_result').html(\n      '<div class=\"minibed_checkbox-result\"><input type=\"checkbox\" id=\"minibed_checkbox-result\" value=\"on\"><label for=\"minibed_checkbox-result\"></label> Live </div>'\n    )\n\n    tabs.append(result.el)\n\n    ref.wrapper.appendChild(tabs.el)\n  }\n\n  function getShortName (name) {\n    const parts = name.split('/')\n    return parts[parts.length - 1]\n  }\n\n  /**\n   * @param {Minibed} ref\n   * @return {void}\n   */\n  function buildContents (ref) {\n    const tabContents = new Utils.CreateDOM('div.minibed_tab_contents')\n    let foundActive = false\n\n    ref.loading = new Utils.CreateDOM('div.minibed_loading')\n    tabContents.append(ref.loading.el)\n\n    if (ref.has.html) {\n      let i = 0\n      ref.options.files.html.forEach(file => {\n        const tabContent = new Utils.CreateDOM('textarea.minibed_tab_content')\n          .setAttr('data-file', file)\n          .setAttr('data-loaded', 'no')\n          .setAttr('data-lang', 'htmlmixed')\n\n        if (i === 0) {\n          tabContent.class('minibed_selected_content')\n        }\n\n        if (!foundActive) {\n          tabContent.class('minibed_active_tab')\n          foundActive = true\n        }\n\n        tabContents.append(tabContent.el)\n        i++\n      })\n    }\n\n    if (ref.has.css) {\n      let i = 0\n      ref.options.files.css.forEach(file => {\n        const tabContent = new Utils.CreateDOM('textarea.minibed_tab_content')\n          .setAttr('data-file', file)\n          .setAttr('data-loaded', 'no')\n          .setAttr('data-lang', 'css')\n\n        if (i === 0) {\n          tabContent.class('minibed_selected_content')\n        }\n\n        if (!foundActive) {\n          tabContent.class('minibed_active_tab')\n          foundActive = true\n        }\n\n        tabContents.append(tabContent.el)\n        i++\n      })\n    }\n\n    if (ref.has.js) {\n      let i = 0\n      ref.options.files.js.forEach(file => {\n        const tabContent = new Utils.CreateDOM('textarea.minibed_tab_content')\n          .setAttr('data-file', file)\n          .setAttr('data-loaded', 'no')\n          .setAttr('data-lang', 'javascript')\n\n        if (i === 0) {\n          tabContent.class('minibed_selected_content')\n        }\n\n        if (!foundActive) {\n          tabContent.class('minibed_active_tab')\n          foundActive = true\n        }\n\n        tabContents.append(tabContent.el)\n        i++\n      })\n    }\n\n    const resultFrame = new Utils.CreateDOM('iframe.minibed_result_frame')\n      .setAttr('src', 'about:blank')\n      .setAttr('name', ref.id)\n    tabContents.append(resultFrame.el)\n\n    ref.wrapper.appendChild(tabContents.el)\n  }\n\n  /**\n   * @param {Minibed} ref\n   * @return {void}\n   */\n  function buildFooter (ref) {\n    if (ref.options.notes.length > 0) {\n      const footer = new Utils.CreateDOM('div.minibed_footer')\n\n      ref.options.notes.forEach(note => {\n        const p = new Utils.CreateDOM('p.minibed_footer_note').html(note)\n\n        footer.append(p.el)\n      })\n\n      ref.wrapper.appendChild(footer.el)\n    }\n  }\n\n  /**\n   * @param {Minibed} ref\n   * @return {void}\n   */\n  function findOrCreateContainer (ref) {\n    if (ref.options.container) {\n      ref.container = document.querySelector(ref.options.container)\n    }\n  }\n\n  return {\n      FileTypes,\n      Includes,\n      Defaults,\n      build\n  }\n});\n"]}